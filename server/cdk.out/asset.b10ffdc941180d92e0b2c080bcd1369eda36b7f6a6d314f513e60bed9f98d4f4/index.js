"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const AWS = require("aws-sdk");
const crypto_1 = require("crypto");
const dynamoClient = new AWS.DynamoDB.DocumentClient();
const TABLE_NAME = process.env.DYNAMO_TABLE_NAME;
exports.handler = async (event, context) => {
    const params = {
        TableName: TABLE_NAME,
        Item: {
            id: crypto_1.randomBytes(4).toString("hex"),
            ...event.detail,
        },
    };
    try {
        await dynamoClient.put(params).promise();
        return ({ operationSuccessful: true });
    }
    catch (err) {
        console.log("DynamoDB error: ", err);
        return ({ operationSuccessful: false });
    }
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJpbmRleC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUNBLCtCQUErQjtBQUUvQixtQ0FBcUM7QUFLckMsTUFBTSxZQUFZLEdBQUcsSUFBSSxHQUFHLENBQUMsUUFBUSxDQUFDLGNBQWMsRUFBRSxDQUFDO0FBQ3ZELE1BQU0sVUFBVSxHQUFHLE9BQU8sQ0FBQyxHQUFHLENBQUMsaUJBQTJCLENBQUM7QUFFM0QsT0FBTyxDQUFDLE9BQU8sR0FBRyxLQUFLLEVBQUUsS0FBb0MsRUFBRSxPQUFnQixFQUFFLEVBQUU7SUFDL0UsTUFBTSxNQUFNLEdBQUc7UUFDWCxTQUFTLEVBQUUsVUFBVTtRQUNyQixJQUFJLEVBQUU7WUFDRixFQUFFLEVBQUUsb0JBQVcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDO1lBQ2xDLEdBQUcsS0FBSyxDQUFDLE1BQU07U0FDbEI7S0FDSixDQUFDO0lBRUYsSUFBSTtRQUNBLE1BQU0sWUFBWSxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsQ0FBQyxPQUFPLEVBQUUsQ0FBQztRQUN6QyxPQUFPLENBQUMsRUFBQyxtQkFBbUIsRUFBQyxJQUFJLEVBQUMsQ0FBQyxDQUFBO0tBRWxDO0lBRUwsT0FBTyxHQUFHLEVBQUU7UUFDUixPQUFPLENBQUMsR0FBRyxDQUFDLGtCQUFrQixFQUFFLEdBQUcsQ0FBQyxDQUFDO1FBQ3JDLE9BQU8sQ0FBQyxFQUFDLG1CQUFtQixFQUFDLEtBQUssRUFBQyxDQUFDLENBQUE7S0FFdkM7QUFDTCxDQUFDLENBQUEiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBFdmVudEJyaWRnZUV2ZW50LCBDb250ZXh0IH0gZnJvbSBcImF3cy1sYW1iZGFcIjtcclxuaW1wb3J0ICogYXMgQVdTIGZyb20gXCJhd3Mtc2RrXCI7XHJcblxyXG5pbXBvcnQgeyByYW5kb21CeXRlcyB9IGZyb20gJ2NyeXB0byc7XHJcblxyXG5cclxuXHJcblxyXG5jb25zdCBkeW5hbW9DbGllbnQgPSBuZXcgQVdTLkR5bmFtb0RCLkRvY3VtZW50Q2xpZW50KCk7XHJcbmNvbnN0IFRBQkxFX05BTUUgPSBwcm9jZXNzLmVudi5EWU5BTU9fVEFCTEVfTkFNRSBhcyBzdHJpbmc7XHJcblxyXG5leHBvcnRzLmhhbmRsZXIgPSBhc3luYyAoZXZlbnQ6IEV2ZW50QnJpZGdlRXZlbnQ8c3RyaW5nLCBhbnk+LCBjb250ZXh0OiBDb250ZXh0KSA9PiB7XHJcbiAgICBjb25zdCBwYXJhbXMgPSB7XHJcbiAgICAgICAgVGFibGVOYW1lOiBUQUJMRV9OQU1FLFxyXG4gICAgICAgIEl0ZW06IHtcclxuICAgICAgICAgICAgaWQ6IHJhbmRvbUJ5dGVzKDQpLnRvU3RyaW5nKFwiaGV4XCIpLFxyXG4gICAgICAgICAgICAuLi5ldmVudC5kZXRhaWwsXHJcbiAgICAgICAgfSxcclxuICAgIH07XHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgICBhd2FpdCBkeW5hbW9DbGllbnQucHV0KHBhcmFtcykucHJvbWlzZSgpO1xyXG4gICAgICAgIHJldHVybiAoe29wZXJhdGlvblN1Y2Nlc3NmdWw6dHJ1ZX0pXHJcbiAgICAgICBcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICBjYXRjaCAoZXJyKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCJEeW5hbW9EQiBlcnJvcjogXCIsIGVycik7XHJcbiAgICAgICAgcmV0dXJuICh7b3BlcmF0aW9uU3VjY2Vzc2Z1bDpmYWxzZX0pXHJcbiAgICAgICAgXHJcbiAgICB9XHJcbn0iXX0=